From 33fe2c98b11f985573a3663e9dc9bff1161d0fcd Mon Sep 17 00:00:00 2001
From: Axel Huebl <axel.huebl@plasma.ninja>
Date: Mon, 25 Nov 2019 19:06:25 -0800
Subject: [PATCH] MPark.Variant: Hotfix NVCC C++14

Apply a hotfix for C++14 builds with NVCC in downstream
projects.
---
 CHANGELOG.rst                                              | 1 +
 share/openPMD/thirdParty/variant/include/mpark/variant.hpp | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/CHANGELOG.rst b/CHANGELOG.rst
index 694650bf..95421994 100644
--- a/CHANGELOG.rst
+++ b/CHANGELOG.rst
@@ -24,6 +24,7 @@ Bug Fixes
 - nvcc:
 
   - ignore export of ``enum class Operation`` #617
+  - fix C++14 build #618
 
 Other
 """""
diff --git a/share/openPMD/thirdParty/variant/include/mpark/variant.hpp b/share/openPMD/thirdParty/variant/include/mpark/variant.hpp
index 990a44cb..4ab6e2fa 100644
--- a/share/openPMD/thirdParty/variant/include/mpark/variant.hpp
+++ b/share/openPMD/thirdParty/variant/include/mpark/variant.hpp
@@ -2655,7 +2655,7 @@ namespace mpark {
     return false;
   }
 
-#ifdef MPARK_CPP14_CONSTEXPR
+#if defined(MPARK_CPP14_CONSTEXPR) && !defined(__NVCC__)
   namespace detail {
 
     inline constexpr bool all(std::initializer_list<bool> bs) {

